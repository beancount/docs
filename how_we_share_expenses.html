<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="canonical" href="https://beancount.github.io/docs/how_we_share_expenses.html">
  <link rel="shortcut icon" href="img/favicon.ico">
  <title>How We Share Expenses - Beancount Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="css/theme.css" />
  <link rel="stylesheet" href="css/theme_extra.css" />
  <link href="assets/_mkdocstrings.css" rel="stylesheet" />
  <link href="css/custom.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "How We Share Expenses";
    var mkdocs_page_input_path = "how_we_share_expenses.md";
    var mkdocs_page_url = "/docs/how_we_share_expenses.html";
  </script>
  
  <script src="js/jquery-2.1.1.min.js" defer></script>
  <script src="js/modernizr-2.8.3.min.js" defer></script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="index.html" class="icon icon-home"> Beancount Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="index.html">Index</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Outline</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="#">Documentation for Users</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="command_line_accounting_in_context.html">Command Line Accounting in Context</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="the_double_entry_counting_method.html">The Double Entry Counting Method</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="installing_beancount.html">Installing Beancount</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="running_beancount_and_generating_reports.html">Running Beancount and Generating Reports</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="getting_started_with_beancount.html">Getting Started with Beancount</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="beancount_language_syntax.html">Beancount Language Syntax</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="beancount_options_reference.html">Beancount Options Reference</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="precision_tolerances.html">Precision Tolerances</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="beancount_query_language.html">Beancount Query Language</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="beancount_cheat_sheet.html">Beancount Cheat Sheet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="how_inventories_work.html">How Inventories Work</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="exporting_your_portfolio.html">Exporting Your Portfolio</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="tutorial_example.html">Tutorial & Example</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="beancount_history_and_credits.html">Beancount History and Credits</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="a_comparison_of_beancount_and_ledger_hledger.html">A Comparison of Beancount and Ledger Hledger</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="fetching_prices_in_beancount.html">Fetching Prices in Beancount</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="importing_external_data.html">Importing External Data</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="#">Cookbooks & Examples</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="command_line_accounting_cookbook.html">Command Line Accounting Cookbook</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="trading_with_beancount.html">Trading with Beancount</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="stock_vesting_in_beancount.html">Stock Vesting in Beancount</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="sharing_expenses_with_beancount.html">Sharing Expenses with Beancount</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="how_we_share_expenses.html">How We Share Expenses</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#context">Context</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#shared-expenses">Shared Expenses</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#my-shared-expenses">My Shared Expenses</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#her-shared-expenses">Her Shared Expenses</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#reviewing-statement">Reviewing &amp; Statement</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#reconciling-our-shared-expenses">Reconciling our Shared Expenses</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#child-expenses">Child Expenses</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#my-child-expenses-on-my-personal-ledger">My Child Expenses on my Personal Ledger</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#my-child-expenses-in-kyles-own-ledger">My Child Expenses in Kyle’s own Ledger</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#her-child-expenses">Her Child Expenses</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#putting-it-all-together">Putting it All Together</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#reconciling-the-child-ledger">Reconciling the Child Ledger</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#summary-of-the-system">Summary of the System</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#conclusion">Conclusion</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="health_care_expenses.html">Health Care Expenses</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="calculating_portolio_returns.html">Calculating Portfolio Returns</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="tracking_medical_claims.html">Tracking Out-of-Network Medical Claims in Beancount</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Documentation for Developers</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="beancount_scripting_plugins.html">Beancount Scripting Plugins</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="beancount_design_doc.html">Beancount Design Doc</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="ledgerhub_design_doc.html">Ledgerhub Design Doc</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="external_contributions.html">External Contributions</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Enhancement Proposals & Discussions</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="a_proposal_for_an_improvement_on_inventory_booking.html">A Proposal for an Improvement on Inventory Booking</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="settlement_dates_in_beancount.html">Settlement Dates in Beancount</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="balance_assertions_in_beancount.html">Balance Assertions in Beancount</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="fund_accounting_with_beancount.html">Fund Accounting with Beancount</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="rounding_precision_in_beancount.html">Rounding Precision in Beancount</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Beancount 3</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="beancount_v3.html">Goals & Design</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="installing_beancount_v3.html">Installing Beancount</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="beancount_v3_dependencies.html">Dependencies</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="beangulp.html">Beangulp</a>
                </li>
    </ul>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">API reference</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="api_reference/index.html">beancount</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="api_reference/beancount.core.html">beancount.core</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="api_reference/beancount.loader.html">beancount.loader</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="api_reference/beancount.ops.html">beancount.ops</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="api_reference/beancount.parser.html">beancount.parser</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="api_reference/beancount.plugins.html">beancount.plugins</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="api_reference/beancount.scripts.html">beancount.scripts</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="api_reference/beancount.tools.html">beancount.tools</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="api_reference/beancount.utils.html">beancount.utils</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Beancount Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
    
      
        
          <li>Outline &raquo;</li>
        
      
        
          <li>Cookbooks & Examples &raquo;</li>
        
      
    
    <li>How We Share Expenses</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="how-we-share-expenses">How We Share Expenses<a id="title"></a><a class="headerlink" href="#how-we-share-expenses" title="Permanent link"></a></h1>
<p><em>This document explains how I share expenses with my wife. This is a bit involved and I’ve developed a good working system, but it’s not so simple for most people to do that, so I figured I would take the time to describe it to help others with designing similar processes for themselves.</em></p>
<h2 id="context">Context<a id="context"></a><a class="headerlink" href="#context" title="Permanent link"></a></h2>
<p>We’re both working professionals and have decided to share all expenses roughly 70%/30%. This is what we shoot for, this is not a hard rule, but we track it as if it were rigid, and accept it as a good approximation. We have two types of shared expenses:</p>
<ul>
<li>
<p><strong>Shared.</strong> Common expenses between us, e.g., rent, a dinner out with friends, etc.</p>
</li>
<li>
<p><strong>Kyle.</strong> Expenses for our child, e.g., daycare, diapers, nanny, baby food.</p>
</li>
</ul>
<p>These get handled very differently, because we book our child's expenses as if it were a separate project on its own. (If you prefer pictures, there’s a diagram at the end of this document that provides an overview of the system.)</p>
<h2 id="shared-expenses">Shared Expenses<a id="shared-expenses"></a><a class="headerlink" href="#shared-expenses" title="Permanent link"></a></h2>
<p>For our shared expenses, I maintain an account for her on my personal ledger file. This is simple and I’m not too interested in maintaining a separate ledger for the totality of our common shared expenses. It’s sufficient for me to just keep track of her balance on that one account. You can imagine that account like a credit card (I’m the credit provider) that she pays off with transfers and also by making her own shared expenses.</p>
<p>I just declare an <code>Assets:US:Share:Carolyn</code> account on my personal ledger (<code>blais.beancount</code>).</p>
<h3 id="my-shared-expenses">My Shared Expenses<a id="my-shared-expenses"></a><a class="headerlink" href="#my-shared-expenses" title="Permanent link"></a></h3>
<p>Whenever I incur an expense that is for both of us, I book it normally but I will tag it with #carolyn:</p>
<pre><code>2018-12-23 * "WHISK" "Water refill" #carolyn
  Liabilities:US:Amex:BlueCash  -32.66 USD
  Expenses:Food:Grocery
</code></pre>
<p>This gets automatically converted to:</p>
<pre><code>2018-12-23 * "WHISK" "Water refill" #carolyn
  Liabilities:US:Amex:BlueCash  -32.66 USD
  Expenses:Food:Grocery          19.60 USD
  Assets:US:Share:Carolyn       13.06 USD
    share: TRUE
</code></pre>
<p>This is done by a <a href="https://github.com/beancount/beancount/tree/master/experiments/sharing"><u>custom plugin</u></a> I built that splits the expenses according to some rules that we have between us (see also <a href="https://github.com/Akuukis/beancount_share"><u>this plugin by Akkukis</u></a>). In this example, 40% of 32.66 (13.06) gets rerouted to her account. Note that this is an asset account for me, because she owes this.</p>
<h3 id="her-shared-expenses">Her Shared Expenses<a id="her-shared-expenses"></a><a class="headerlink" href="#her-shared-expenses" title="Permanent link"></a></h3>
<p>We also have to keep track of the money she spends on her own for shared expenses. Since she’s not a Beancount user, I’ve set up a Google Sheets doc in which she can add rows to a particular sheet. This sheet has fields: Date, Description, Account, Amount. I try to keep it simple.</p>
<p>Then, I built an <a href="http://github.com/beancount/beancount/tree/master/experiments/sharing/extract_sheets.py"><u>extract_sheets.py</u></a> script that can pull down this data automatically and it writes it to a dedicated file for this, overwriting the entire contents each time. The contents of this ledger (<code>carolyn.beancount</code>) look like this:</p>
<pre><code>pushtag #carolyn
...
2017-05-21 * "Amazon" "Cotton Mattress Protector in White"
  Expenses:Home:Furniture    199.99 USD
  Assets:US:Share:Carolyn  -199.99 USD
...
poptag #carolyn
</code></pre>
<p>All of those transactions are tagged as #carolyn from the pushtag/poptag directive. They get translated by the plugin to reduce the amount by the portion I’m supposed to pay:</p>
<pre><code>2017-05-21 * "Amazon" "Cotton Mattress Protector in White" #carolyn
  Expenses:Home:Furniture    119.99 USD
  Assets:US:Share:Carolyn  -119.99 USD
    share: TRUE
</code></pre>
<p>These postings typically reduce her asset account by that much, and thus remove the portion she paid for me on these shared expenses.</p>
<p>I generate the file with a single command like this:</p>
<pre><code>extract_sheets.py --tag='carolyn' --sheet='Shared Expenses' '&lt;id&gt;' 'Assets:US:Share:Carolyn' &gt; carolyn.beancount
</code></pre>
<p>In my personal ledger, I include this file to merge those expenses with my own directives flow. I also define a query to generate a statement for her account. In <code>blais.beancount</code>:</p>
<pre><code>include "carolyn.beancount"

2020-01-01 query "carolyn" "                                                                                                                                                                                                                                                                                                                                                                                                           
 select date, description, position, balance                                                                                                                                                                                                                                                                                                                                                                                            
 from open on 2017-01-01                                                                                                                                                                                                                                                                                                                                                                                                                
 where account ~ 'Assets:US:Share:Carolyn'                                                                                                                                                                                                                                                                                                                                                                                             
"
</code></pre>
<h3 id="reviewing-statement">Reviewing &amp; Statement<a id="reviewing-statement"></a><a class="headerlink" href="#reviewing-statement" title="Permanent link"></a></h3>
<p>In order to produce a statement for her to review (and spot the occasional mistake in data entry), I simply produce a journal of that account to a CSV file and upload that to another sheet in the same Google Sheets doc she inputs her expenses:</p>
<pre><code>bean-query -f csv -o carolyn.csv --numberify $L run carolyn
upload-to-sheets -v --docid="&lt;id&gt;" carolyn.csv:"Shared Account (Read-Only)"
</code></pre>
<p>This makes it easy for her to eyeball all the amounts posted to her balance with me and point out errors if they occur (some always appear). Moreover, all the information is in one place—it’s important to keep it simple. Finally, we can use the collaborative features of Sheets to communicate, e.g. comments, highlighting text, etc.</p>
<p>Note that this system has the benefit of correctly accruing my expenses, by reducing my portion on categories for the stuff I pay and by including her portion on categories for the stuff she pays for.</p>
<h3 id="reconciling-our-shared-expenses">Reconciling our Shared Expenses<a id="reconciling-our-shared-expenses"></a><a class="headerlink" href="#reconciling-our-shared-expenses" title="Permanent link"></a></h3>
<p>Finally, in order to reconcile this account, my wife (or I, but usually she’s behind) just makes a bank transfer to my account, which I book to reduce her running account balance:</p>
<pre><code>2019-01-30 * "HERBANK EXT TRNSFR; DIRECTDEP"
  Assets:US:MyBank:Checking  3000 USD
  Assets:US:Share:Carolyn
</code></pre>
<p>Typically she'll do this every month or two. She'll be fiddling on her laptop and ask casually "Hey, what's my balance I can do a transfer now?" It’s all fine to relax about the particulars since the system is keeping track of everything precisely, so she can send some approximate amount, it doesn't matter, it'll post to her account.</p>
<h2 id="child-expenses">Child Expenses<a id="child-expenses"></a><a class="headerlink" href="#child-expenses" title="Permanent link"></a></h2>
<p>I designed a very different system to track our child’s expenses. For Kyle, I’m definitely interested in tracking the total cash flows and expenses related to him, regardless of who paid for them. It’s interesting to be able to ask (our ledger) a question like: “How much did his schooling cost?”, for example, or “How much did we pay in diapers, in total?”. Furthermore, we tend to pay for different things for Kyle, e.g. I deal with the daycare expenses (I’m the accounting nerd after all, so this shouldn’t be surprising), and his mother tends to buy all the clothing and prepare his food. To have a global picture of all costs related to him, we need to account for these things correctly.</p>
<p>One interesting detail is that it would be difficult to do this with the previously described method, because I’d have to have a mirror of all expense accounts I’d use for him. This would make my personal ledger really ugly. For example, I want to book diapers to <code>Expenses:Pharmacy</code>, but I also have my own personal pharmacy expenses. So in theory, to do that I’d like to have separate accounts for him and me, e.g., <code>Expenses:Kyle:Pharmacy</code> and <code>Expenses:Pharmacy</code>. This would have to be done for all the accounts we use for him. I don't do that.</p>
<h3 id="my-child-expenses-on-my-personal-ledger">My Child Expenses on my Personal Ledger<a id="my-child-expenses-on-my-personal-ledger"></a><a class="headerlink" href="#my-child-expenses-on-my-personal-ledger" title="Permanent link"></a></h3>
<p>Instead of doing that, what I want is for my personal ledger to book all the expenses I make for him to a single category: <code>Expenses:Kyle</code>, and to track all the detail in a shared ledger. But I still have to book all the expenses to some category, and these appear on my personal ledger, there’s no option (I won’t maintain a separate credit card to pay for his expenses, that would be overkill, so I have to find a way).</p>
<p>I accomplish this by booking the expenses to my own expenses account, as usual, but tagging the transaction with #kyle:</p>
<pre><code>2019-02-01 * "AMAZON.COM" "MERCHANDISE - Diapers size 4 for Kyle" #kyle
  Liabilities:US:Amex:BlueCash  -49.99 USD
  Expenses:Pharmacy
</code></pre>
<p>And I have a different plugin that <em>automatically</em> makes the conversion of those transactions to:</p>
<pre><code>2019-02-01 * "AMAZON.COM" "MERCHANDISE - Diapers size 4 for Kyle" #kyle
 Liabilities:US:Amex:BlueCash  -49.99 USD
 Expenses:Kyle                   49.99 USD
   diverted_account: "Expenses:Pharmacy"
</code></pre>
<p>So from my personal side, all those expenses get booked to my “Kyle project” account. This is accomplished by the <a href="http://github.com/beancount/beancount/tree/master/beancount/plugins/divert_expenses.py"><u>divert_expenses</u></a> plugin, with this configuration:</p>
<pre><code>plugin "beancount.plugins.divert_expenses" "{                                                                                                                                                                                                                                                                                                                                                                                           
  'tag': 'kyle',                                                                                                                                                                                                                                                                                                                                                                                                                         
  'account': 'Expenses:Kyle'                                                                                                                                                                                                                                                                                                                                                                                                             
}"
</code></pre>
<p>The “diverted_account” metadata is used to keep track of the original account, and this is used later by another script that generates a ledger file decided to my expenses for him (more below).</p>
<h3 id="my-child-expenses-in-kyles-own-ledger">My Child Expenses in Kyle’s own Ledger<a id="my-child-expenses-in-kyles-own-ledger"></a><a class="headerlink" href="#my-child-expenses-in-kyles-own-ledger" title="Permanent link"></a></h3>
<p>Now, because we’re considering Kyle’s expenses a project of his own, I have to maintain a set of ledgers for him. I automatically pull the transactions I described in the previous section from my personal ledger and automatically convert them to a file dedicated to his dad (me). This is done by calling the <a href="http://github.com/beancount/beancount/tree/master/experiments/sharing/extract_tagged.py"><u>extract_tagged</u></a> script:</p>
<pre><code>extract_tagged.py blais.beancount '#kyle' 'Income:Dad' --translate "Expenses:Kyle:Mom=Income:Mom" &gt; dad.beancount
</code></pre>
<p>The matching transaction from the previous section would look like this in it:</p>
<pre><code>2019-02-01 * "AMAZON.COM" "MERCHANDISE - Diapers size 4 for Kyle" #kyle
  Income:Dad      -49.99 USD
  Expenses:Pharmacy   49.99 USD
</code></pre>
<p>As you can see, the script was able to reconstruct the original account name in Kyle’s ledger by using the metadata saved by the divert_expenses plugin in the previous section. It also books the source of the payment to a single account showing it came from his father (<code>Income:Dad</code>). There’s no need for me to keep track of which payment method I used on Kyle’s side (e.g. by credit card), that’s not important to him.</p>
<p>This ledger contains the sum total of all expenses I’ve made for him to date. The file gets entirely overwritten each time I run this (this is a purely generated output, no hand editing is ever done here, if I change anything I change it in my personal ledger file).</p>
<h3 id="her-child-expenses">Her Child Expenses<a id="her-child-expenses"></a><a class="headerlink" href="#her-child-expenses" title="Permanent link"></a></h3>
<p>In order to keep track of her expenses for Kyle, we use the same method (and programs) as we use for our shared accounts in order to pull a set of “Carolyn’s expenses for Kyle” from another sheet in the same Google Sheets doc:</p>
<pre><code>extract_sheets.py --sheet='Kyle Expenses (Regular)' '&lt;id&gt;' 'Income:Mom' &gt; mom.beancount
</code></pre>
<p>This pulls in transactions that look like this:</p>
<pre><code>2018-09-23 * "SPROUT SAN FRANCISCO" "Clothing for Kyle 9-12 months"
  Expenses:Clothing   118.30 USD
  Income:Mom      -118.30 USD
</code></pre>
<p>The expenses accounts are pulled from the sheet—sometimes I have to go fix that by hand a bit, as they may not track precisely those from our ledger—and the income shows that the contribution was made by his mother.</p>
<h3 id="putting-it-all-together">Putting it All Together<a id="putting-it-all-together"></a><a class="headerlink" href="#putting-it-all-together" title="Permanent link"></a></h3>
<p>Finally, we need to put together all these files. I created a top-level kyle.beancount file that simple declares all of his account categories and includes his mom and dad files. We have three files:</p>
<pre><code>dad.beancount
mom.beancount
kyle.beancount -&gt; includes transactions from dad.beancount and mom.beancount
</code></pre>
<p>I can then run bean-web or bean-query on kyle.beancount. There are two things which are interesting to see on that ledger:</p>
<ol>
<li>
<p>The distribution of Kyle’s expenses, in other words, what’s it costing us to raise a child (regardless of who pays).</p>
</li>
<li>
<p>The difference between our contributions.</p>
</li>
</ol>
<p>In order to reconcile (2), we basically compare the balances of the <code>Income:Mom</code> and <code>Income:Dad</code> accounts. This can be done “by hand”, visually (using a calculator), but since Beancount’s API make it so easy to pull any number from a ledger, I wrote a simple script which does that, computes the total amount of Income contributions, breaks it down to the expected numbers based on our chosen breakdown, compares it to each parent’s actual contribution, and simply prints out the difference:</p>
<pre><code>$ reconcile_shared.py kyle.beancount

Total contributions:                       71009.30

Dad expected contribution:              42605.58
Dad actual contribution:                42906.58

Mom expected contribution:              28403.72
Mom actual contribution:                28102.72

Mom OWES Dad:       301.00
</code></pre>
<p>After reconciling, the final number should be zero.</p>
<h3 id="reconciling-the-child-ledger">Reconciling the Child Ledger<a id="reconciling-the-child-ledger"></a><a class="headerlink" href="#reconciling-the-child-ledger" title="Permanent link"></a></h3>
<p>In order to account for the difference and make the contributions to Kyle’s upbringing in line with our mutual arrangement of 60%/40%, in the previous section, my wife would need to transfer $301 to me. Of course, we don’t <em>actually</em> transfer anything in practice, I just add a virtual transfer to book the difference to her shared account on my ledger. To do this, all I have to do is insert a transaction in <code>blais.beancount</code> that looks like this:</p>
<pre><code>2019-02-09 * "Transfer to reconcile Kyle's expenses" #kyle
  Assets:US:Share:Carolyn         301.00 USD
  Expenses:Kyle:Mom
</code></pre>
<p>When this gets pulled into <code>dad.beancount</code> (as explained previously), it looks like this:</p>
<pre><code>2019-02-09 * "Transfer to reconcile Kyle's expenses" #kyle
  Income:Mom             -301.00 USD
  Income:Dad              301.00 USD
</code></pre>
<p>After that, going back to the Kyle ledger, pulling in all the transactions again (this is done by using a Makefile) would show an updated balance of 0:</p>
<pre><code>$ reconcile_shared.py kyle.beancount

Total contributions:                       71009.30

Dad expected contribution:              42605.58
Dad actual contribution:                42605.58

Mom expected contribution:              28403.72
Mom actual contribution:                28403.72

Mom OWES Dad:       0.00
</code></pre>
<h2 id="summary-of-the-system">Summary of the System<a id="summary-of-the-system"></a><a class="headerlink" href="#summary-of-the-system" title="Permanent link"></a></h2>
<p>Here’s a diagram that puts in perspective the entire system together:</p>
<p><img src="how_we_share_expenses/media/859a53a2976ca14d122483a7f69e419afe2609c0.png" style="width:8.79167in;height:6.94444in" /></p>
<p>I (“Dad”) use Beancount via Emacs, exclusively. Carolyn (“Mom”) only interacts with a single Google Sheets doc with three sheets in it. I pull in Carolyn’s shared expenses from a sheet that she fills in to a ledger which gets included in my personal ledger. I also pull in her expenses for Kyle in a similar document, and from my personal ledger I generate my own expenses for Kyle. Both of these documents are merged in a top-level ledger dedicated to Kyle’s expenses.</p>
<p>I’m not going to claim it’s simple and that it’s always up-to-date. I tend to update all of these things once/quarter and fix a few input errors each time we review it. I automate much of it via Makefiles, but frankly I don’t update it frequently enough to just remember where all the moving pieces are, so every time, there’s a bit of scrambling and reading my makefiles and figuring out what’s what (in fact, I was motivated to write this to cement my understanding solidly for the future). Amazingly enough, it hasn’t broken at all and I find all the pieces every time and make it work.</p>
<p>And we have enough loose change between the two of us that it’s never that urgent to reconcile every week. My wife tends to pay more shared expenses and I tend to pay more Kyle’s expenses, so I often end up doing a transfer from one to the other to even things out and it’s relatively close—the shortfall in Kyle expenses makes up for my shortfall on the shared expenses.</p>
<h2 id="conclusion">Conclusion<a id="conclusion"></a><a class="headerlink" href="#conclusion" title="Permanent link"></a></h2>
<p>I hope this was useful to some of you trying to solve problems using the double-entry bookkeeping method. Please write questions and comments on the Beancount mailing-list, or as comments on this doc.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="health_care_expenses.html" class="btn btn-neutral float-right" title="Health Care Expenses">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="sharing_expenses_with_beancount.html" class="btn btn-neutral" title="Sharing Expenses with Beancount"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="sharing_expenses_with_beancount.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="health_care_expenses.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme_extra.js" defer></script>
    <script src="js/theme.js" defer></script>
      <script src="search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
