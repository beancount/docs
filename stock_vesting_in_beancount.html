<!DOCTYPE html>

<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://beancount.github.io/docs/stock_vesting_in_beancount.html" rel="canonical"/>
<link href="img/favicon.ico" rel="shortcut icon"/>
<title>Stock Vesting in Beancount - Beancount Documentation</title>
<link href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" rel="stylesheet">
<link href="css/theme.css" rel="stylesheet">
<link href="css/theme_extra.css" rel="stylesheet"/>
<link href="css/custom.css" rel="stylesheet"/>
<script>
    // Current page data
    var mkdocs_page_name = "Stock Vesting in Beancount";
    var mkdocs_page_input_path = "stock_vesting_in_beancount.md";
    var mkdocs_page_url = "/docs/stock_vesting_in_beancount.html";
  </script>
<script defer="" src="js/jquery-2.1.1.min.js"></script>
<script defer="" src="js/modernizr-2.8.3.min.js"></script>
</link></link></head>
<body class="wy-body-for-nav" role="document">
<div class="wy-grid-for-nav">
<nav class="wy-nav-side stickynav" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<a class="icon icon-home" href="."> Beancount Documentation</a>
<div role="search">
<form action="./search.html" class="wy-form" id="rtd-search-form" method="get">
<input name="q" placeholder="Search docs" title="Type search term here" type="text"/>
</form>
</div>
</div>
<div aria-label="main navigation" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Index</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Outline</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="#">Documentation for Users</a>
<ul>
<li class="toctree-l2"><a class="reference internal" href="command_line_accounting_in_context.html">Command Line Accounting in Context</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="the_double_entry_counting_method.html">The Double Entry Counting Method</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="installing_beancount.html">Installing Beancount</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="running_beancount_and_generating_reports.html">Running Beancount and Generating Reports</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="getting_started_with_beancount.html">Getting Started with Beancount</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="beancount_language_syntax.html">Beancount Language Syntax</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="beancount_options_reference.html">Beancount Options Reference</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="precision_tolerances.html">Precision Tolerances</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="beancount_query_language.html">Beancount Query Language</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="beancount_cheat_sheet.html">Beancount Cheat Sheet</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="how_inventories_work.html">How Inventories Work</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="exporting_your_portfolio.html">Exporting Your Portfolio</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_example.html">Tutorial &amp; Example</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="beancount_history_and_credits.html">Beancount History and Credits</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="a_comparison_of_beancount_and_ledger_hledger.html">A Comparison of Beancount and Ledger Hledger</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="fetching_prices_in_beancount.html">Fetching Prices in Beancount</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="importing_external_data.html">Importing External Data</a>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal current" href="#">Cookbooks &amp; Examples</a>
<ul class="current">
<li class="toctree-l2"><a class="reference internal" href="command_line_accounting_cookbook.html">Command Line Accounting Cookbook</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="trading_with_beancount.html">Trading with Beancount</a>
</li>
<li class="toctree-l2 current"><a class="reference internal current" href="stock_vesting_in_beancount.html">Stock Vesting in Beancount</a>
<ul class="current">
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#restricted-stock-compensation">Restricted Stock Compensation</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tracking-awards">Tracking Awards</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#commodities">Commodities</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#accounts-for-awards">Accounts for Awards</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#receiving-awards">Receiving Awards</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#vesting-events">Vesting Events</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#accounts">Accounts</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#vesting">Vesting</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#conversion-to-actual-stock">Conversion to Actual Stock</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#refund-for-fractions">Refund for Fractions</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#organizing-your-input">Organizing your Input</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#unvested-shares">Unvested Shares</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#asserting-unvested-balances">Asserting Unvested Balances</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#pricing-unvested-shares">Pricing Unvested Shares</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#selling-vested-stock">Selling Vested Stock</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#conclusion">Conclusion</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sharing_expenses_with_beancount.html">Sharing Expenses with Beancount</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="how_we_share_expenses.html">How We Share Expenses</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="health_care_expenses.html">Health Care Expenses</a>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#">Documentation for Developers</a>
<ul>
<li class="toctree-l2"><a class="reference internal" href="beancount_scripting_plugins.html">Beancount Scripting Plugins</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="beancount_design_doc.html">Beancount Design Doc</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="ledgerhub_design_doc.html">Ledgerhub Design Doc</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="external_contributions.html">External Contributions</a>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#">Enhancement Proposals &amp; Discussions</a>
<ul>
<li class="toctree-l2"><a class="reference internal" href="a_proposal_for_an_improvement_on_inventory_booking.html">A Proposal for an Improvement on Inventory Booking</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="settlement_dates_in_beancount.html">Settlement Dates in Beancount</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="balance_assertions_in_beancount.html">Balance Assertions in Beancount</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="fund_accounting_with_beancount.html">Fund Accounting with Beancount</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="rounding_precision_in_beancount.html">Rounding Precision in Beancount</a>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">API reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api_reference/index.html">beancount</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_reference/beancount.core.html">beancount.core</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_reference/beancount.ingest.html">beancount.ingest</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_reference/beancount.loader.html">beancount.loader</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_reference/beancount.ops.html">beancount.ops</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_reference/beancount.parser.html">beancount.parser</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_reference/beancount.plugins.html">beancount.plugins</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_reference/beancount.prices.html">beancount.prices</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_reference/beancount.query.html">beancount.query</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_reference/beancount.reports.html">beancount.reports</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_reference/beancount.scripts.html">beancount.scripts</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_reference/beancount.tools.html">beancount.tools</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_reference/beancount.utils.html">beancount.utils</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_reference/beancount.web.html">beancount.web</a>
</li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift">
<nav aria-label="top navigation" class="wy-nav-top" role="navigation">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href=".">Beancount Documentation</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content">
<div aria-label="breadcrumbs navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a href=".">Docs</a> »</li>
<li>Cookbooks &amp; Examples »</li>
<li>Outline »</li>
<li>Stock Vesting in Beancount</li>
<li class="wy-breadcrumbs-aside">
<a class="icon icon-github" href="https://github.com/beancount/docs/edit/master/docs/stock_vesting_in_beancount.md"> Edit on GitHub</a>
</li>
</ul>
<hr/>
</div>
<div role="main">
<div class="section">
<h1 id="stock-vesting-in-beancount">Stock Vesting in Beancount<a id="title"></a><a class="headerlink" href="#stock-vesting-in-beancount" title="Permanent link"></a></h1>
<p><a href="mailto:blais@furius.ca"><span class="underline">Martin Blais</span></a>, June 2015</p>
<p><a href="http://furius.ca/beancount/doc/vesting"><span class="underline">http://furius.ca/beancount/doc/vesting</span></a></p>
<h2 id="introduction">Introduction<a id="introduction"></a><a class="headerlink" href="#introduction" title="Permanent link"></a></h2>
<p>This document explains the vesting of restricted stock units in Beancount, by way of an example. This example may not exactly match your situation, but enough detail is provided that you should be able to adapt it for your own particular differences.</p>
<p>A working example file can be found <a href="https://bitbucket.org/blais/beancount/src/tip/examples/vesting/vesting.beancount"><span class="underline">here</span></a> to follow along with this text.</p>
<h2 id="restricted-stock-compensation">Restricted Stock Compensation<a id="restricted-stock-compensation"></a><a class="headerlink" href="#restricted-stock-compensation" title="Permanent link"></a></h2>
<p>Many technology companies offer their employees incentive compensation in the form of “grants” (or “awards”) of “restricted stock units” (RSU), which is essentially a promise for the “release” to you of actual shares in the future. The stock is “restricted” in the sense that you cannot access it—you only receive it when it “vests”, and this happens based on a schedule. Typically, you are promised a fixed number of shares that vest every quarter or every month over a period of 3 or 4 years. If you leave the company, your remaining unvested shares are lost. <img src="stock_vesting_in_beancount/media/6a910c80cfb0385f9cff8de1b5976716a1eb7324.jpg" style="width:2.18229in;height:1.26744in"/></p>
<p>One way you can view these RSUs is as an asset, a receivable that arrives regularly over time. These RSUs are essentially compensation denominated in the currency of the company’s shares itself. We want to track the unraveling of these unvested units, and correctly account for their conversion to real stock with a cost basis and including whatever taxes were paid upon vesting.</p>
<h2 id="tracking-awards">Tracking Awards<a id="tracking-awards"></a><a class="headerlink" href="#tracking-awards" title="Permanent link"></a></h2>
<h3 id="commodities">Commodities<a id="commodities"></a><a class="headerlink" href="#commodities" title="Permanent link"></a></h3>
<p>First we want to define some commodities. In this example, I work for “Hooli Inc.” and will eventually receive shares of that company (valued in US dollars):</p>
<pre><code>1990-12-02 commodity HOOL
  name: "Common shares of Hooli Inc."
  quote: USD
</code></pre>
<p>We will also want to track the amount of unvested shares:</p>
<pre><code>2013-01-28 commodity HOOL.UNVEST
  name: "Unvested shares of Hooli from awards."
</code></pre>
<h3 id="accounts-for-awards">Accounts for Awards<a id="accounts-for-awards"></a><a class="headerlink" href="#accounts-for-awards" title="Permanent link"></a></h3>
<p>Grants received is income. I use “Income:US:Hooli” as the root for all income accounts from Hooli, but in particular, I define an account for the awards, which contains units of unvested stock:</p>
<pre><code>2013-01-28 open Income:US:Hooli:Awards        HOOL.UNVEST
</code></pre>
<p>When the stock vests, we will need to book the other side of this income somewhere, so we define an expenses account to count how much stock has been vested over a period of time:</p>
<pre><code>2014-01-28 open Expenses:Hooli:Vested         HOOL.UNVEST
</code></pre>
<h3 id="receiving-awards">Receiving Awards<a id="receiving-awards"></a><a class="headerlink" href="#receiving-awards" title="Permanent link"></a></h3>
<p>When you receive a new award (this may occur every year, for example, some people call this a “stock refresh”), you receive it as income and deposit it into a fresh new account, used to track this particular award:</p>
<pre><code>2014-04-02 * "Award S0012345"
  Income:US:Hooli:Awards                -1680 HOOL.UNVEST
  Assets:US:Hooli:Unvested:S0012345      1680 HOOL.UNVEST

2014-04-02 open Assets:US:Hooli:Unvested:S0012345
</code></pre>
<p>You may have multiple active awards at the same time. It’s nice to have a separate account per award, as it offers a natural way to list their contents and when the award expires, you can close the account—the list of open award accounts gives you the list of outstanding &amp; actively vesting awards. In this example I used the number of the award (#S0012345) as the sub-account name. It’s useful to use the number as the statements typically include it.</p>
<p>I like to keep all the awards in a small dedicated section.</p>
<h2 id="vesting-events">Vesting Events<a id="vesting-events"></a><a class="headerlink" href="#vesting-events" title="Permanent link"></a></h2>
<p>Then I have a different section that contains all the transactions that follow a vesting event.</p>
<h3 id="accounts">Accounts<a id="accounts"></a><a class="headerlink" href="#accounts" title="Permanent link"></a></h3>
<p>First, when we vest stock, it’s a taxable income event. The cash value for the stock needs an Income account:</p>
<pre><code>2013-04-04 open Income:US:Hooli:RSU
</code></pre>
<p>Taxes paid should be on the annual expenses accounts you should have defined somewhere else to account for that year’s taxes (this is covered elsewhere in the cookbook):</p>
<pre><code>2015-01-01 open Expenses:Taxes:TY2015:US:StateNY
2015-01-01 open Expenses:Taxes:TY2015:US:Federal
2015-01-01 open Expenses:Taxes:TY2015:US:SocSec
2015-01-01 open Expenses:Taxes:TY2015:US:SDI
2015-01-01 open Expenses:Taxes:TY2015:US:Medicare
2015-01-01 open Expenses:Taxes:TY2015:US:CityNYC
</code></pre>
<p>After paying taxes on the received income, the remaining cash is deposited in a limbo account before getting converted:</p>
<pre><code>2013-01-28 open Assets:US:Hooli:RSURefund
</code></pre>
<p>Also, in another section we should have an account for the brokerage which holds and manages the shares for you:</p>
<pre><code>2013-04-04 open Assets:US:Schwab:HOOL
</code></pre>
<p>Generally you don’t have a choice for this broker because the company you work normally makes an arrangement with an external firm in order to administer the restricted stock program. Typical firms doing this type of administration are Morgan Stanley, Salomon Smith Barney, Schwab, even E*Trade. In the example we’ll use a Schwab account.</p>
<p>And we also need some sort of checking account to receive cash in lieu of fractional shares. I’ll assume a Bank of America account in the example:</p>
<pre><code>2001-01-01 open Assets:US:BofA:Checking
</code></pre>
<h3 id="vesting">Vesting<a id="vesting"></a><a class="headerlink" href="#vesting" title="Permanent link"></a></h3>
<p>First, the vesting events themselves:</p>
<pre><code>2015-05-27 * "Vesting Event - S0012345 - HOOL" #award-S0012345 ^392f97dd62d0
  doc: "2015-02-13.hooli.38745783.pdf"
  Income:US:Hooli:RSU                    -4597.95 USD
  Expenses:Taxes:TY2015:US:Medicare         66.68 USD
  Expenses:Taxes:TY2015:US:Federal        1149.48 USD
  Expenses:Taxes:TY2015:US:CityNYC         195.42 USD
  Expenses:Taxes:TY2015:US:SDI               0.00 USD
  Expenses:Taxes:TY2015:US:StateNY         442.32 USD
  Expenses:Taxes:TY2015:US:SocSec          285.08 USD
  Assets:US:Hooli:RSURefund               2458.97 USD
</code></pre>
<p>This corresponds line-by-line to a payroll stub that I receive each vesting event for each award. Since all the RSU awards at Hooli vest on the same day of the month, this means that I have clusters of these, one for each award (in the example file I show two awards).</p>
<p>Some observations are in order:</p>
<ul>
<li>
<p>The value of the Income posting consists of the number of shares vested times the FMV of the stock. In this case, that is 35 shares ⨉ $131.37/share = $4597.95. I just write the dollar amount because it is provided to me on the pay stub.</p>
</li>
<li>
<p>Receiving vested stock is a taxable income event, and Hooli automatically withholds taxes and pays them to the government on its employees’ behalf. These are the Expenses:Taxes accounts corresponding to your W-2.</p>
</li>
<li>
<p>Finally, I don’t directly deposit the converted shares to the brokerage account; this is because the remainder of cash after paying tax expenses is not necessarily a round number of shares. Therefore, I used a limbo account (<code>Assets:US:Hooli:RSURefund</code>) and decouple the receipt from the conversion.</p>
</li>
</ul>
<p>This way, each transaction corresponds exactly to one pay stub. It makes it easier to enter the data.</p>
<p>Also note that I used a unique link (<code>^392f97dd62d0</code>) to group all the transactions for a particular vesting event. You could also use tags if you prefer.</p>
<h3 id="conversion-to-actual-stock">Conversion to Actual Stock<a id="conversion-to-actual-stock"></a><a class="headerlink" href="#conversion-to-actual-stock" title="Permanent link"></a></h3>
<p>Now we’re ready to convert the remaining cash to stock units. This happens in the brokerage firm and you should see the new shares in your brokerage account. The brokerage will typically issue a “stock release report” statement for each vesting event for each award, with the details necessary to make the conversion, namely, the actual number of shares converted from cash and the cost basis (the FMV on the vesting day):</p>
<pre><code>2015-05-25 * "Conversion into shares" ^392f97dd62d0
  Assets:US:Schwab:HOOL                   18 HOOL {131.3700 USD}
  Assets:US:Hooli:RSURefund
  Assets:US:Hooli:Unvested:S0012345      -35 HOOL.UNVEST
  Expenses:Hooli:Vested                   35 HOOL.UNVEST
</code></pre>
<p>The first two postings deposit the shares and subtract the dollar value from the limbo account where the vesting transaction left the remaining cash. You should make sure to use the specific FMV price provided by the statement and not an approximate price, because this has tax consequences later on. Note that you cannot buy fractional shares, so the cost of the rounded amount of shares (18) will leave some remaining cash in the limbo account.</p>
<p>The last two postings deduct from the balance of unvested shares and I “receive” an expenses; that expenses account basically counts how many shares were vested over a particular time period.</p>
<p>Here again you will probably have one of these conversions for each stock grant you have. I enter them separately, so that one statement matches one transaction. This is a good rule to follow.</p>
<h3 id="refund-for-fractions">Refund for Fractions<a id="refund-for-fractions"></a><a class="headerlink" href="#refund-for-fractions" title="Permanent link"></a></h3>
<p>After all the conversion events have moved cash out of the limbo account, it is left the fractional remainders from all the conversions. In my case, this remainder is refunded by Hooli 3-4 weeks after vesting as a single separate pay stub that includes all the remainders (it even lists each of them separately). I enter this as a transaction as well:</p>
<pre><code>2015-06-13 * "HOOLI INC       PAYROLL" ^392f97dd62d0
  doc: "2015-02-13.hooli.38745783.pdf"
  Assets:US:Hooli:RSURefund            -94.31 USD
  Assets:US:Hooli:RSURefund             -2.88 USD ; (For second award in example)
  Assets:US:BofA:Checking               97.19 USD
</code></pre>
<p>After the fractions have been paid the limbo account should be empty. I verify this claim using a balance assertion:</p>
<pre><code>2015-06-14 balance Assets:US:Hooli:RSURefund  0 USD
</code></pre>
<p>This provides me with some sense that the numbers are right.</p>
<h3 id="organizing-your-input">Organizing your Input<a id="organizing-your-input"></a><a class="headerlink" href="#organizing-your-input" title="Permanent link"></a></h3>
<p>I like to put all the vesting events together in my input file; this makes them much easier to update and reconcile, especially with multiple awards. For example, with two awards I would have multiple chunks of transactions like this, separated with 4-5 empty lines to delineate them:</p>
<pre><code>2015-05-27 * "Vesting Event - S0012345 - HOOL" #award-S0012345 ^392f97dd62d0
  doc: "2015-02-13.hooli.38745783.pdf"
  Income:US:Hooli:RSU                    -4597.95 USD
  Assets:US:Hooli:RSURefund               2458.97 USD
  Expenses:Taxes:TY2015:US:Medicare         66.68 USD
  Expenses:Taxes:TY2015:US:Federal        1149.48 USD
  Expenses:Taxes:TY2015:US:CityNYC         195.42 USD
  Expenses:Taxes:TY2015:US:SDI               0.00 USD
  Expenses:Taxes:TY2015:US:StateNY         442.32 USD
  Expenses:Taxes:TY2015:US:SocSec          285.08 USD

2015-05-27 * "Vesting Event - C123456 - HOOL" #award-C123456 ^392f97dd62d0
  doc: "2015-02-13.hooli.38745783.pdf"
  Income:US:Hooli:RSU                    -1970.55 USD
  Assets:US:Hooli:RSURefund               1053.84 USD
  Expenses:Taxes:TY2015:US:Medicare         28.58 USD
  Expenses:Taxes:TY2015:US:Federal         492.63 USD
  Expenses:Taxes:TY2015:US:CityNYC          83.75 USD
  Expenses:Taxes:TY2015:US:SDI               0.00 USD
  Expenses:Taxes:TY2015:US:StateNY         189.57 USD
  Expenses:Taxes:TY2015:US:SocSec          122.18 USD

2015-05-25 * "Conversion into shares" ^392f97dd62d0
  Assets:US:Schwab:HOOL                        18 HOOL {131.3700 USD}
  Assets:US:Hooli:RSURefund
  Assets:US:Hooli:Unvested:S0012345           -35 HOOL.UNVEST
  Expenses:Hooli:Vested                        35 HOOL.UNVEST

2015-05-25 * "Conversion into shares" ^392f97dd62d0
  Assets:US:Schwab:HOOL                         9 HOOL {131.3700 USD}
  Assets:US:Hooli:RSURefund
  Assets:US:Hooli:Unvested:C123456            -15 HOOL.UNVEST
  Expenses:Hooli:Vested                        15 HOOL.UNVEST

2015-06-13 * "HOOLI INC       PAYROLL" ^392f97dd62d0
  doc: "2015-02-13.hooli.38745783.pdf"
  Assets:US:Hooli:RSURefund                -94.30 USD
  Assets:US:Hooli:RSURefund                 -2.88 USD
  Assets:US:BofA:Checking                   97.18 USD

2015-02-14 balance Assets:US:Hooli:RSURefund    0 USD
</code></pre>
<h2 id="unvested-shares">Unvested Shares<a id="unvested-shares"></a><a class="headerlink" href="#unvested-shares" title="Permanent link"></a></h2>
<h3 id="asserting-unvested-balances">Asserting Unvested Balances<a id="asserting-unvested-balances"></a><a class="headerlink" href="#asserting-unvested-balances" title="Permanent link"></a></h3>
<p>Finally, you may occasionally want to assert the number of unvested shares. I like to do this semi-annually, for example. The brokerage company that handles the RSUs for Hooli should be able to list how many unvested shares of each award remain, so it’s as simple as looking it up on a website:</p>
<pre><code>2015-06-04 balance Assets:US:Hooli:Unvested:S0012345  1645 HOOL.UNVEST
2015-06-04 balance Assets:US:Hooli:Unvested:C123456    705 HOOL.UNVEST
</code></pre>
<h3 id="pricing-unvested-shares">Pricing Unvested Shares<a id="pricing-unvested-shares"></a><a class="headerlink" href="#pricing-unvested-shares" title="Permanent link"></a></h3>
<p>You can also put a price on the unvested shares in order to estimate the unvested dollar amount. You should use a fictional currency for this, because we want to avoid a situation where a balance sheet is produced that includes these unvested assets as regular dollars:</p>
<pre><code>2015-06-02 price HOOL.UNVEST               132.4300 USD.UNVEST
</code></pre>
<p>At the time of this writing, the bean-web interface does not convert the units if they are not held at cost, but using the SQL query interface or writing a custom script you should be able to produce those numbers:</p>
<pre><code>$ bean-query examples/vesting/vesting.beancount

beancount&gt; select account, sum(convert(position, 'USD.UNVEST')) as unvested 
           where account ~ 'Unvested' group by account;

             account                     unvested       
--------------------------------- ----------------------
Assets:US:Hooli:Unvested:S0012345 217847.3500 USD.UNVEST
Assets:US:Hooli:Unvested:C123456   93363.1500 USD.UNVEST
</code></pre>
<h2 id="selling-vested-stock">Selling Vested Stock<a id="selling-vested-stock"></a><a class="headerlink" href="#selling-vested-stock" title="Permanent link"></a></h2>
<p>After each vesting event, the stock is left in your brokerage account. Selling this stock proceeds just as in any other trading transaction (see <a href="trading_with_beancount.html"><span class="underline">Trading with Beancount</span></a> for full details). For example, selling the shares from the example would look something like this:</p>
<pre><code>2015-09-10 * "Selling shares"
  Assets:US:Schwab:HOOL        -26 HOOL {131.3700 USD} @ 138.23 USD
  Assets:US:Schwab:Cash    3593.98 USD
  Income:US:Schwab:Gains
</code></pre>
<p>Here you can see why it matters that the cost basis you used on the conversion event is the correct one: You will have to pay taxes on the difference (in <code>Income:US:Schwab:Gains</code>). In this example the taxable difference is (138.23 - 131.37) dollars per share.</p>
<p>I like to keep all the brokerage transactions in a separate section of my document, where other transactions related to the brokerage occur, such as fees, dividends and transfers.</p>
<h2 id="conclusion">Conclusion<img src="stock_vesting_in_beancount/media/04de27aeb8e7b7cbc9201ce82ae780d21cec36fb.jpg" style="width:2.04688in;height:1.39525in"/><a id="conclusion"></a><a class="headerlink" href="#conclusion" title="Permanent link"></a></h2>
<p>This is a simple example that is modeled after how technology companies deal with this type of compensation. It is by no means comprehensive, and some of the details will necessarily vary in your situation. In particular, it does not explain how to deal with options (ISOs). My hope is that there is enough meat in this document to allow you to extrapolate and adapt to your particular situation. If you get stuck, please reach out on the <a href="http://furius.ca/beancount/doc/mailing-list"><span class="underline">mailing-list</span></a>.</p>
</div>
</div>
<footer>
<div aria-label="footer navigation" class="rst-footer-buttons" role="navigation">
<a class="btn btn-neutral float-right" href="sharing_expenses_with_beancount.html" title="Sharing Expenses with Beancount">Next <span class="icon icon-circle-arrow-right"></span></a>
<a class="btn btn-neutral" href="trading_with_beancount.html" title="Trading with Beancount"><span class="icon icon-circle-arrow-left"></span> Previous</a>
</div>
<hr/>
<div role="contentinfo">
<!-- Copyright etc -->
</div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
</div>
</div>
</section>
</div>
<div aria-label="versions" class="rst-versions" role="note">
<span class="rst-current-version" data-toggle="rst-current-version">
<a class="fa fa-github" href="https://github.com/beancount/docs/" style="float: left; color: #fcfcfc"> GitHub</a>
<span><a href="trading_with_beancount.html" style="color: #fcfcfc;">« Previous</a></span>
<span style="margin-left: 15px"><a href="sharing_expenses_with_beancount.html" style="color: #fcfcfc">Next »</a></span>
</span>
</div>
<script>var base_url = '.';</script>
<script defer="" src="js/theme.js"></script>
<script defer="" src="js/extra.js"></script>
<script defer="" src="search/main.js"></script>
<script defer="">
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>
</body>
</html>
